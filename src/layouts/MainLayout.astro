---
import BaseHead from 'src/components/astro/BaseHead.astro';
import Footer from 'src/components/jsx/footer/Footer/Footer';
import Header from 'src/components/jsx/header/Header/Header';
import { COLORS } from 'src/consts/Colors';
import '../styles/layouts-shared.css';

const baseUrl = import.meta.env.BASE_URL || 'https://daniel-tenzler.github.io';

interface Props {
	title: string;
	description?: string;
}

const { title, description = "Daniel Tenzler's personal website and blog" } =
	Astro.props;
---

<!doctype html>
<html lang="en">
	<head>
		<!-- Performance optimizations: DNS prefetch for external resources -->
		<link rel="dns-prefetch" href="//api.github.com" />

		<BaseHead
			title={title}
			description={description}
			image="/images/portfolio/blog-placeholder-2.jpg"
			structuredData={{
				'@context': 'https://schema.org',
				'@type': 'WebPage',
				name: title,
				description: description,
				url: Astro.url.href,
				author: {
					'@type': 'Person',
					name: 'Daniel Tenzler',
					url: baseUrl,
				},
				publisher: {
					'@type': 'Organization',
					name: 'Daniel Tenzler',
					logo: {
						'@type': 'ImageObject',
						url: '/icons/favicon.svg',
					},
				},
				mainEntity: {
					'@type': 'Person',
					name: 'Daniel Tenzler',
					jobTitle: 'Software Developer',
					url: baseUrl,
				},
				// dateModified: new Date().toISOString(), // Removed to prevent hydration mismatch
				inLanguage: 'en-US',
			}}
		/>

		<!-- Inline script for no-flash dark mode -->
		<script is:inline>
			(function () {
				const stored = localStorage.getItem('theme');
				if (stored) {
					document.documentElement.setAttribute('data-theme', stored);
				} else {
					const prefersDark = window.matchMedia(
						'(prefers-color-scheme: dark)'
					).matches;
					document.documentElement.setAttribute(
						'data-theme',
						prefersDark ? 'dark' : 'light'
					);
				}
			})();
		</script>
	</head>
	<body>
		<a href="#main-content" class="skip-link">Skip to main content</a>
		<div class="min-h-screen flex flex-col">
			<Header id="navigation" client:visible />
			<main id="main-content" class="flex-grow">
				<slot />
			</main>
			<Footer client:idle />
		</div>
	</body>
</html>
