---
import BaseHead from 'src/components/astro/BaseHead.astro';
import Footer from 'src/components/jsx/footer/Footer/Footer';
import Header from 'src/components/jsx/header/Header/Header';
import '../styles/layouts-shared.css';

const baseUrl = import.meta.env.BASE_URL || 'https://daniel-tenzler.github.io';

interface Props {
	title: string;
	description?: string;
	structuredData?: object;
}

const { title, description = "Daniel Tenzler's personal website and blog", structuredData } =
	Astro.props;
---

<!doctype html>
<html lang="en">
	<head>
		<BaseHead
			title={title}
			description={description}
			image="/images/portfolio/blog-placeholder-2.jpg"
			structuredData={structuredData || {
				'@context': 'https://schema.org',
				'@type': 'WebPage',
				name: title,
				description: description,
				url: Astro.url.href,
				author: {
					'@type': 'Person',
					name: 'Daniel Tenzler',
					url: baseUrl,
				},
				publisher: {
					'@type': 'Organization',
					name: 'Daniel Tenzler',
					logo: {
						'@type': 'ImageObject',
						url: '/icons/favicon.svg',
					},
				},
				mainEntity: {
					'@type': 'Person',
					name: 'Daniel Tenzler',
					jobTitle: 'Software Developer',
					url: baseUrl,
				},
				inLanguage: 'en-US',
			}}
		/>

		<!-- Inline script for no-flash dark mode -->
		<script is:inline>
			(function() {
				const stored = localStorage.getItem('theme');
				if (stored) {
					document.documentElement.setAttribute('data-theme', stored);
				} else {
					const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
					document.documentElement.setAttribute('data-theme', prefersDark ? 'dark' : 'light');
				}
			})();
		</script>
	</head>
	<body>
		<a href="#main-content" class="skip-link">Skip to main content</a>
		<div class="min-h-screen flex flex-col">
			<Header id="navigation" client:visible />
			<main id="main-content" class="flex-grow">
				<slot />
			</main>
			<Footer client:idle />
		</div>
	</body>
</html>

<style is:global>
	/* Portfolio-specific layout overrides */
	body {
		line-height: 1.7;
	}

	main {
		width: 85%;
		max-width: calc(100% - 2em);
		margin: auto;
		padding: 1em 1em;
		min-height: calc(100vh - (201px + 32px));
		overflow: auto;
	}

	@media (max-width: 700px) {
		main {
			width: 90%;
			max-width: 90%;
		}
	}

	@media (max-width: 720px) {
		main {
			padding: 1em;
		}
	}
</style>
