---
import { SITE_TITLE, SITE_DESCRIPTION } from '../../consts';
import MainLayout from '../../layouts/MainLayout.astro';
import { getCollection } from 'astro:content';
import BlogContainer from '../../components/jsx/blog/BlogContainer';

const posts = (await getCollection('blog')).sort(
	(a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf()
);

// Get all unique tags from posts
const allTags = [...new Set(posts.flatMap(post => post.data.tags || []))].sort();
---

<MainLayout title={`Blog - ${SITE_TITLE}`} description={SITE_DESCRIPTION}>
	<div class="max-w-4xl mx-auto">
		<BlogContainer client:load posts={posts} allTags={allTags} />
	</div>
</MainLayout>

<style>
	:global(.bg-accent) {
		background-color: var(--accent);
	}
	:global(.bg-accent-dark) {
		background-color: var(--accent-dark);
	}
	:global(.text-accent) {
		color: var(--accent);
	}
	:global(.hover\:text-accent:hover) {
		color: var(--accent);
	}
	:global(.hover\:bg-accent-dark:hover) {
		background-color: var(--accent-dark);
	}
	:global(.focus\:ring-accent:focus) {
		--tw-ring-color: var(--accent);
	}
</style>
