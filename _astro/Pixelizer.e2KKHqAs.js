import{c as e,j as r}from"./emotion-styled-base.browser.esm.-xjhUz6l.js";import{r as a}from"./index.CxjelfC8.js";const t=e("div",{target:"e19jlw9d24",label:"Container"})({name:"1i0tsdi",styles:"width:90%;max-width:1600px;height:100%;min-height:calc(100vh - 205px);margin:0 auto;padding:1.5em 0;display:flex;flex-direction:column;align-items:center;gap:1.5em"}),i=e("input",{target:"e19jlw9d22",label:"FileInput"})({name:"eivff4",styles:"display:none"}),l=e(e("button",{target:"e19jlw9d18",label:"BaseButton"})({name:"1se1lvz",styles:"color:var(--color-text-muted);padding:0.75em 2em;border:none;border-radius:8px;background-color:var(--gray-2d2d2d);font-weight:500;font-size:0.95rem;cursor:pointer;min-width:140px;transition:background-color 0.2s ease,box-shadow 0.2s ease;&:hover:not(:disabled){background-color:var(--gray-222939);box-shadow:0 2px 4px #0000001a;}&:active:not(:disabled){background-color:var(--gray-383838);box-shadow:none;}&:focus-visible{outline:2px solid var(--gray-222939);outline-offset:2px;}&:disabled{opacity:0.5;cursor:not-allowed;}@media (max-width: 480px){padding:0.6em 1.5em;font-size:0.9rem;min-width:120px;}"}),{target:"e19jlw9d17",label:"ProcessButton"})(),o=e("div",{target:"e19jlw9d15",label:"ErrorMessage"})({name:"h69x97",styles:"color:#ff6b6b;background-color:rgba(255, 107, 107, 0.1);border:1px solid rgba(255, 107, 107, 0.3);border-radius:6px;padding:0.75em 1em;margin:0.5em auto;text-align:center;font-size:0.9rem;max-width:90%"}),n=e("div",{target:"e19jlw9d6",label:"Header"})({name:"1ypoepn",styles:"text-align:center;margin-bottom:2rem;h1{color:var(--color-text-emphasis);font-size:2.5rem;font-weight:700;margin-bottom:0.5rem;}p{color:var(--color-text-muted);font-size:1.1rem;max-width:600px;margin:0 auto;line-height:1.6;}@media (max-width: 768px){h1{font-size:2rem;}p{font-size:1rem;padding:0 1rem;}}"}),s=e("div",{target:"e19jlw9d5",label:"ControlsSection"})({name:"zba1ug",styles:"display:flex;flex-direction:column;gap:2rem;padding:1.5rem;background-color:var(--gray-474747);border-radius:8px;border:1px solid var(--gray-383838);max-width:800px;margin:0 auto;width:100%;@media (min-width: 768px){flex-direction:row;justify-content:space-between;align-items:flex-start;}"}),d=e("label",{target:"e19jlw9d4",label:"FileUploadZone"})({name:"1t62a0n",styles:"display:flex;flex-direction:column;align-items:center;justify-content:center;gap:1rem;padding:3rem 2rem;border:2px dashed var(--gray-383838);border-radius:8px;background-color:var(--gray-2d2d2d);cursor:pointer;transition:all 0.2s ease;min-height:200px;&:hover{border-color:var(--color-text-muted);background-color:var(--gray-333847);}&.drag-over{border-color:#14b8a6;background-color:rgba(20, 184, 166, 0.1);}&.has-file{border-color:#14b8a6;background-color:var(--gray-474747);padding:1.5rem;}svg{width:48px;height:48px;color:var(--color-text-muted);}.upload-text{color:var(--color-text-muted);font-size:1rem;text-align:center;}&.has-file .upload-text{font-size:0.9rem;color:var(--color-text-emphasis);}@media (max-width: 768px){padding:2rem 1rem;min-height:150px;}"}),c=e("div",{target:"e19jlw9d3",label:"PixelSizeSlider"})({name:"tmrekk",styles:"display:flex;flex-direction:column;align-items:center;gap:1rem;.slider-container{display:flex;align-items:center;gap:1rem;width:100%;}slider{flex:1;height:6px;border-radius:3px;background:var(--gray-383838);outline:none;cursor:pointer;&::-webkit-slider-thumb{appearance:none;width:20px;height:20px;border-radius:50%;background:#14b8a6;cursor:pointer;border:2px solid var(--gray-383838);transition:all 0.2s ease;&:hover{background:#0d9488;transform:scale(1.1);}}&::-moz-range-thumb{width:20px;height:20px;border-radius:50%;background:#14b8a6;cursor:pointer;border:2px solid var(--gray-383838);transition:all 0.2s ease;&:hover{background:#0d9488;transform:scale(1.1);}}&:focus-visible{outline:2px solid var(--color-text-muted);outline-offset:2px;}}.size-value{background-color:var(--gray-383838);color:var(--color-text-emphasis);padding:0.5rem 1rem;border-radius:6px;font-size:0.95rem;font-weight:500;min-width:60px;text-align:center;}.slider-label{color:var(--color-text-muted);font-size:0.95rem;font-weight:500;text-align:center;}"}),g=e("div",{target:"e19jlw9d2",label:"ActionButtons"})({name:"icpoll",styles:"display:flex;justify-content:center;align-items:center;gap:1rem;flex-wrap:wrap"}),m=e("div",{target:"e19jlw9d1",label:"ComparisonSection"})({name:"1adczox",styles:"display:flex;flex-direction:column;gap:2rem;padding:2rem;background-color:var(--gray-474747);border-radius:8px;border:1px solid var(--gray-383838);margin-top:2rem;width:100%;max-width:1200px;margin-left:auto;margin-right:auto;@media (min-width: 768px){flex-direction:row;justify-content:space-between;align-items:center;}"}),p=e("div",{target:"e19jlw9d0",label:"ImageCard"})({name:"7np447",styles:"display:flex;flex-direction:column;align-items:center;gap:1rem;flex:1;.image-wrapper{position:relative;width:100%;max-width:400px;border-radius:8px;overflow:hidden;border:2px solid var(--gray-383838);box-shadow:0 4px 8px #00000033;img{width:100%;height:auto;display:block;}canvas{width:100%;height:auto;display:block;}}.image-label{color:var(--color-text-muted);font-size:0.95rem;font-weight:500;text-align:center;padding:0 1rem;}@media (max-width: 768px){.image-wrapper{max-width:100%;}}"}),x=()=>{const{pixelSize:e,originalImage:x,pixelatedCanvas:h,isProcessing:u,error:b,fileInputRef:f,setPixelSize:w,setOriginalImage:v,setPixelatedCanvas:y,setIsProcessing:j,setError:k,clearAll:z}=(()=>{const[e,r]=a.useState(8),[t,i]=a.useState(null),[l,o]=a.useState(null),[n,s]=a.useState(!1),[d,c]=a.useState(""),g=a.useRef(null);return{pixelSize:e,originalImage:t,pixelatedCanvas:l,isProcessing:n,error:d,fileInputRef:g,setPixelSize:r,setOriginalImage:i,setPixelatedCanvas:o,setIsProcessing:s,setError:c,clearAll:()=>{r(8),i(null),o(null),s(!1),c(""),g.current&&(g.current.value="")}}})(),{pixelateImage:P}={pixelateImage:(e,r)=>{if(!e)throw new Error("Image element is required");if(!r||r<1||r>32)throw new Error("Pixel size must be between 1 and 32");const a=document.createElement("canvas"),t=a.getContext("2d"),i=Math.ceil(e.width/r),l=Math.ceil(e.height/r);a.width=i,a.height=l,t.drawImage(e,0,0,i,l);const o=document.createElement("canvas"),n=o.getContext("2d");return o.width=e.width,o.height=e.height,n.imageSmoothingEnabled=!1,n.drawImage(a,0,0,i,l,0,0,e.width,e.height),o}},C=a.useRef(null),[I,S]=a.useState(!1);a.useEffect(()=>{if(C.current&&e){j(!0);try{const r=P(C.current,e);y(r)}catch(r){k("Error processing image. Please try again.")}finally{j(!1)}}},[x,e,P,j,y,k]);const N=e=>{if(!(e=>e.type.startsWith("image/")?!(e.size>10485760&&(k("File size exceeds 10MB limit. Please choose a smaller image."),1)):(k("Please select a valid image file (JPG, PNG, GIF, WebP, etc.)"),!1))(e))return;k(""),j(!0);const r=new FileReader;r.onload=e=>{const r=new Image;r.onload=()=>{var a;!((a=r).width>4096||a.height>4096)||k(`Image dimensions (${a.width}x${a.height}) exceed 4096x4096 limit. Processing may be slow.`),v(e.target.result),j(!1)},r.onerror=()=>{k("Failed to load image. Please try a different file."),j(!1)},r.src=e.target.result},r.readAsDataURL(e)};return r.jsxs(t,{children:[r.jsxs(n,{children:[r.jsx("h1",{children:"Pixelizer"}),r.jsx("p",{children:"Transform any image into pixel art. Upload an image, adjust the pixel size, and download your retro creation."})]}),r.jsxs(s,{children:[r.jsxs(d,{htmlFor:"file-upload",className:`${I?"drag-over":""} ${x?"has-file":""}`,onDragOver:e=>{e.preventDefault(),e.stopPropagation(),S(!0)},onDragLeave:e=>{e.preventDefault(),e.stopPropagation(),S(!1)},onDrop:e=>{e.preventDefault(),e.stopPropagation(),S(!1);const r=e.dataTransfer.files[0];r&&N(r)},tabIndex:0,role:"button","aria-label":"Upload image file or drag and drop",onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),f.current?.click())},children:[x?r.jsxs("div",{className:"upload-text",children:[r.jsx("strong",{children:"Current file:"})," ",(()=>{if(!x)return"";const e=x.split("/");return e[e.length-1]})(),r.jsx("br",{}),r.jsx("span",{style:{fontSize:"0.85em",opacity:.7},children:"Click or drag to replace"})]}):r.jsxs(r.Fragment,{children:[r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),r.jsxs("div",{className:"upload-text",children:[r.jsx("strong",{children:"Click to upload"})," or drag and drop",r.jsx("br",{}),r.jsx("span",{style:{fontSize:"0.85em",opacity:.7},children:"JPG, PNG, GIF, WebP (max 10MB)"})]})]}),r.jsx(i,{id:"file-upload",type:"file",accept:"image/*",onChange:e=>{const r=e.target.files[0];r&&N(r)},ref:f,"aria-label":"Upload image file"})]}),r.jsxs(c,{children:[r.jsxs("label",{className:"slider-label",htmlFor:"pixel-size",children:["Pixel Size: ",e]}),r.jsxs("div",{className:"slider-container",children:[r.jsx("input",{id:"pixel-size",className:"slider",type:"range",min:"1",max:"32",value:e,onChange:e=>{w(parseInt(e.target.value,10))},disabled:!x||u,"aria-label":"Adjust pixel size from 1 to 32"}),r.jsxs("span",{className:"size-value",children:[e,"px"]})]})]}),r.jsxs(g,{children:[r.jsx(l,{onClick:()=>f.current?.click(),disabled:u,"aria-label":"Select image file",children:"Select Image"}),r.jsx(l,{onClick:()=>{h&&h.toBlob(e=>{if(!e)return void k("Failed to download image. Please try again.");const r=URL.createObjectURL(e),a=document.createElement("a");a.href=r;const t=x?x.split("/").pop().split(".")[0]:"image";a.download=`${t}-pixelated.png`,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(r)},"image/png")},disabled:!h||u,"aria-label":"Download pixelated image",children:"Download"}),r.jsx(l,{onClick:()=>{z(),S(!1)},disabled:!x&&!h,"aria-label":"Clear all and reset",children:"Clear"})]})]}),b&&r.jsx(o,{role:"alert","aria-live":"polite",children:b}),x&&r.jsxs(m,{children:[r.jsxs(p,{children:[r.jsx("div",{className:"image-wrapper",children:r.jsx("img",{ref:C,src:x,alt:"Original uploaded file",loading:"lazy"})}),r.jsxs("div",{className:"image-label",children:["Original",C.current&&r.jsxs("span",{children:[" ","(",C.current.width,"×",C.current.height,")"]})]})]}),h&&r.jsxs(p,{children:[r.jsx("div",{className:"image-wrapper",children:r.jsx("img",{src:h.toDataURL("image/png"),alt:"Pixelated version",loading:"lazy"})}),r.jsxs("div",{className:"image-label",children:["Pixelated (",e,"px blocks)",r.jsxs("span",{children:[" ","(",h.width,"×",h.height,")"]})]})]})]}),u&&r.jsx(o,{role:"status","aria-live":"polite",style:{color:"var(--color-text-muted)",backgroundColor:"var(--gray-474747)",borderColor:"var(--gray-383838)"},children:"Processing image..."})]})};export{x as default};
