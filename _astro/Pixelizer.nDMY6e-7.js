import{c as e,j as a}from"./emotion-styled-base.browser.esm.-xjhUz6l.js";import{r}from"./index.CxjelfC8.js";import{c as t}from"./Button.styles._rOhMNT0.js";const i=e("div",{target:"e19jlw9d25",label:"Container"})({name:"1i0tsdi",styles:"width:90%;max-width:1600px;height:100%;min-height:calc(100vh - 205px);margin:0 auto;padding:1.5em 0;display:flex;flex-direction:column;align-items:center;gap:1.5em"}),l=e("input",{target:"e19jlw9d23",label:"FileInput"})({name:"eivff4",styles:"display:none"}),o=e(t,{target:"e19jlw9d19",label:"ProcessButton"}),n=e("div",{target:"e19jlw9d17",label:"ErrorMessage"})({name:"1nz2l4q",styles:"color:#ff6b6b;background-color:rgba(255, 107, 107, 0.1);border:1px solid rgba(255, 107, 107, 0.3);border-radius:6px;padding:0.75em 1em;margin:0.5em auto;text-align:center;font-size:14px;max-width:90%"}),s=e("div",{target:"e19jlw9d8",label:"Header"})({name:"16flwzh",styles:"text-align:center;margin-bottom:32px;h1{color:var(--color-text-emphasis);font-size:40px;font-weight:700;margin-bottom:8px;}p{color:var(--color-text-muted);font-size:18px;max-width:600px;margin:0 auto;line-height:1.6;}@media (max-width: 768px){h1{font-size:32px;}p{font-size:16px;padding:0 16px;}}"}),d=e("div",{target:"e19jlw9d7",label:"ControlsSection"})({name:"1cjdz0v",styles:"display:flex;flex-direction:column;gap:32px;padding:24px;background-color:var(--gray-474747);border-radius:8px;border:1px solid var(--gray-383838);max-width:800px;margin:0 auto;width:100%;@media (min-width: 768px){flex-direction:row;justify-content:space-between;align-items:flex-start;}"}),c=e("label",{target:"e19jlw9d6",label:"FileUploadZone"})({name:"1ua1srm",styles:"display:flex;flex-direction:column;align-items:center;justify-content:center;gap:16px;padding:48px 32px;border:2px dashed var(--gray-383838);border-radius:8px;background-color:var(--gray-2d2d2d);cursor:pointer;transition:all 0.2s ease;min-height:200px;&:hover{border-color:var(--color-text-muted);background-color:var(--gray-333847);}&.drag-over{border-color:#14b8a6;background-color:rgba(20, 184, 166, 0.1);}&.has-file{border-color:#14b8a6;background-color:var(--gray-474747);padding:24px;}svg{width:48px;height:48px;color:var(--color-text-muted);}.upload-text{color:var(--color-text-muted);font-size:16px;text-align:center;}&.has-file .upload-text{font-size:14px;color:var(--color-text-emphasis);}@media (max-width: 768px){padding:32px 16px;min-height:150px;}"}),x=e("div",{target:"e19jlw9d5",label:"PixelSizeSlider"})({name:"1xbfwm9",styles:"display:flex;flex-direction:column;align-items:center;gap:16px;.slider-container{display:flex;align-items:center;gap:16px;width:100%;}slider{flex:1;height:6px;border-radius:3px;background:var(--gray-383838);outline:none;cursor:pointer;&::-webkit-slider-thumb{appearance:none;width:20px;height:20px;border-radius:50%;background:#14b8a6;cursor:pointer;border:2px solid var(--gray-383838);transition:all 0.2s ease;&:hover{background:#0d9488;transform:scale(1.1);}}&::-moz-range-thumb{width:20px;height:20px;border-radius:50%;background:#14b8a6;cursor:pointer;border:2px solid var(--gray-383838);transition:all 0.2s ease;&:hover{background:#0d9488;transform:scale(1.1);}}&:focus-visible{outline:2px solid var(--color-text-muted);outline-offset:2px;}}.size-value{background-color:var(--gray-383838);color:var(--color-text-emphasis);padding:8px 16px;border-radius:6px;font-size:15px;font-weight:500;min-width:60px;text-align:center;}.slider-label{color:var(--color-text-muted);font-size:15px;font-weight:500;text-align:center;}"}),g=e("div",{target:"e19jlw9d4",label:"ActionButtons"})({name:"1e8tufz",styles:"display:flex;justify-content:center;align-items:center;gap:16px;flex-wrap:wrap"}),p=e("div",{target:"e19jlw9d3",label:"ComparisonSection"})({name:"7x2rhe",styles:"display:flex;flex-direction:column;gap:32px;padding:32px;background-color:var(--gray-474747);border-radius:8px;border:1px solid var(--gray-383838);margin-top:32px;width:100%;max-width:1200px;margin-left:auto;margin-right:auto;@media (min-width: 768px){flex-direction:row;justify-content:space-between;align-items:center;}"}),m=e("div",{target:"e19jlw9d2",label:"ImageCard"})({name:"1r44ajd",styles:"display:flex;flex-direction:column;align-items:center;gap:16px;flex:1;.image-wrapper{position:relative;width:100%;max-width:400px;border-radius:8px;overflow:hidden;border:2px solid var(--gray-383838);box-shadow:0 4px 8px #00000033;img{width:100%;height:auto;display:block;}canvas{width:100%;height:auto;display:block;}}.image-label{color:var(--color-text-muted);font-size:15px;font-weight:500;text-align:center;padding:0 16px;}@media (max-width: 768px){.image-wrapper{max-width:100%;}}"}),h=e("span",{target:"e19jlw9d1",label:"UploadHint"})({name:"4qj6la",styles:"font-size:0.85em;opacity:0.7"}),u=e("div",{target:"e19jlw9d0",label:"ProcessingMessage"})({name:"dc4ye2",styles:"color:var(--color-text-muted);background-color:var(--gray-474747);border:1px solid var(--gray-383838);border-radius:6px;padding:0.75em 1em;margin:0.5em auto;text-align:center;font-size:14px;max-width:90%"}),b=()=>{const{pixelSize:e,originalImage:t,pixelatedCanvas:b,isProcessing:f,error:w,fileInputRef:v,setPixelSize:j,setOriginalImage:y,setPixelatedCanvas:z,setIsProcessing:k,setError:P,clearAll:C}=(()=>{const[e,a]=r.useState(8),[t,i]=r.useState(null),[l,o]=r.useState(null),[n,s]=r.useState(!1),[d,c]=r.useState(""),x=r.useRef(null);return{pixelSize:e,originalImage:t,pixelatedCanvas:l,isProcessing:n,error:d,fileInputRef:x,setPixelSize:a,setOriginalImage:i,setPixelatedCanvas:o,setIsProcessing:s,setError:c,clearAll:()=>{a(8),i(null),o(null),s(!1),c(""),x.current&&(x.current.value="")}}})(),{pixelateImage:I}={pixelateImage:(e,a)=>{if(!e)throw new Error("Image element is required");if(!a||a<1||a>32)throw new Error("Pixel size must be between 1 and 32");const r=document.createElement("canvas"),t=r.getContext("2d"),i=Math.ceil(e.width/a),l=Math.ceil(e.height/a);r.width=i,r.height=l,t.drawImage(e,0,0,i,l);const o=document.createElement("canvas"),n=o.getContext("2d");return o.width=e.width,o.height=e.height,n.imageSmoothingEnabled=!1,n.drawImage(r,0,0,i,l,0,0,e.width,e.height),o}},S=r.useRef(null),[D,N]=r.useState(!1);r.useEffect(()=>{if(S.current&&e){k(!0);try{const a=I(S.current,e);z(a)}catch(a){P("Error processing image. Please try again.")}finally{k(!1)}}},[t,e,I,k,z,P]);const E=e=>{if(!((e,a,r={})=>{const{maxSizeMB:t=10}=r;if(!e.type.startsWith("image/"))return a("Please select a valid image file (JPG, PNG, GIF, WebP, etc.)"),!1;const i=1024*t*1024;return!(e.size>i&&(a(`File size exceeds ${t}MB limit. Please choose a smaller image.`),1))})(e,P))return;P(""),k(!0);const a=new FileReader;a.onload=e=>{const a=new Image;a.onload=()=>{((e,a,r={})=>{const{maxDimension:t=4096}=r;!(e.width>t||e.height>t)||a(`Image dimensions (${e.width}x${e.height}) exceed ${t}x${t} limit. Processing may be slow.`)})(a,P),y(e.target.result),k(!1)},a.onerror=()=>{P("Failed to load image. Please try a different file."),k(!1)},a.src=e.target.result},a.readAsDataURL(e)};return a.jsxs(i,{children:[a.jsxs(s,{children:[a.jsx("h1",{children:"Pixelizer"}),a.jsx("p",{children:"Transform any image into pixel art. Upload an image, adjust the pixel size, and download your retro creation."})]}),a.jsxs(d,{children:[a.jsxs(c,{htmlFor:"file-upload",className:`${D?"drag-over":""} ${t?"has-file":""}`,onDragOver:e=>{e.preventDefault(),e.stopPropagation(),N(!0)},onDragLeave:e=>{e.preventDefault(),e.stopPropagation(),N(!1)},onDrop:e=>{e.preventDefault(),e.stopPropagation(),N(!1);const a=e.dataTransfer.files[0];a&&E(a)},tabIndex:0,role:"button","aria-label":"Upload image file or drag and drop",onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),v.current?.click())},children:[t?a.jsxs("div",{className:"upload-text",children:[a.jsx("strong",{children:"Current file:"})," ",(()=>{if(!t)return"";const e=t.split("/");return e[e.length-1]})(),a.jsx("br",{}),a.jsx(h,{children:"Click or drag to replace"})]}):a.jsxs(a.Fragment,{children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),a.jsxs("div",{className:"upload-text",children:[a.jsx("strong",{children:"Click to upload"})," or drag and drop",a.jsx("br",{}),a.jsx(h,{children:"JPG, PNG, GIF, WebP (max 10MB)"})]})]}),a.jsx(l,{id:"file-upload",type:"file",accept:"image/*",onChange:e=>{const a=e.target.files[0];a&&E(a)},ref:v,"aria-label":"Upload image file"})]}),a.jsxs(x,{children:[a.jsxs("label",{className:"slider-label",htmlFor:"pixel-size",children:["Pixel Size: ",e]}),a.jsxs("div",{className:"slider-container",children:[a.jsx("input",{id:"pixel-size",className:"slider",type:"range",min:"1",max:"32",value:e,onChange:e=>{j(parseInt(e.target.value,10))},disabled:!t||f,"aria-label":"Adjust pixel size from 1 to 32"}),a.jsxs("span",{className:"size-value",children:[e,"px"]})]})]}),a.jsxs(g,{children:[a.jsx(o,{onClick:()=>v.current?.click(),disabled:f,"aria-label":"Select image file",children:"Select Image"}),a.jsx(o,{onClick:()=>{b&&b.toBlob(e=>{if(!e)return void P("Failed to download image. Please try again.");const a=URL.createObjectURL(e),r=document.createElement("a");r.href=a;const i=t?t.split("/").pop().split(".")[0]:"image";r.download=`${i}-pixelated.png`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(a)},"image/png")},disabled:!b||f,"aria-label":"Download pixelated image",children:"Download"}),a.jsx(o,{onClick:()=>{C(),N(!1)},disabled:!t&&!b,"aria-label":"Clear all and reset",children:"Clear"})]})]}),w&&a.jsx(n,{role:"alert","aria-live":"polite",children:w}),t&&a.jsxs(p,{children:[a.jsxs(m,{children:[a.jsx("div",{className:"image-wrapper",children:a.jsx("img",{ref:S,src:t,alt:"Original uploaded file",loading:"lazy"})}),a.jsxs("div",{className:"image-label",children:["Original",S.current&&a.jsxs("span",{children:[" ","(",S.current.width,"×",S.current.height,")"]})]})]}),b&&a.jsxs(m,{children:[a.jsx("div",{className:"image-wrapper",children:a.jsx("img",{src:b.toDataURL("image/png"),alt:"Pixelated version",loading:"lazy"})}),a.jsxs("div",{className:"image-label",children:["Pixelated (",e,"px blocks)",a.jsxs("span",{children:[" ","(",b.width,"×",b.height,")"]})]})]})]}),f&&a.jsx(u,{role:"status","aria-live":"polite",children:"Processing image..."})]})};export{b as default};
